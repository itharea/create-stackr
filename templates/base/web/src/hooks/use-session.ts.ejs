"use client";

import { useAuth, useAuthActions } from "@/store/auth.store";

/**
 * Hook to access the current session
 *
 * Provides a simplified interface to the auth store.
 * Use this hook in components that need access to the current user/session.
 */
export function useSession() {
  const { session, user, isLoading, isAuthenticated, error } = useAuth();
  const { signOut, clearError } = useAuthActions();

  return {
    // Session data
    session,
    user,

    // Loading state
    isLoading,

    // Convenience boolean for auth checks
    isAuthenticated,

    // Error state
    error,

    // Actions
    signOut,
    clearError,
  };
}

/**
 * Hook to require authentication
 *
 * Returns the session and throws if not authenticated.
 * Use this in components that should only render when authenticated.
 */
export function useRequireSession() {
  const { session, user, isLoading, isAuthenticated } = useAuth();

  if (!isLoading && !isAuthenticated) {
    throw new Error("Authentication required");
  }

  return {
    session: session!,
    user: user!,
    isLoading,
  };
}

// Re-export store hooks for direct access when needed
export { useAuth, useAuthActions } from "@/store/auth.store";
